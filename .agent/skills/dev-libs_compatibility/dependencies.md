# é¡¹ç›®ä¾èµ–å…¼å®¹æ€§çŸ©é˜µ

æœ¬æ–‡æ¡£è®°å½•é¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬è¦æ±‚ã€å·²çŸ¥å…¼å®¹æ€§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

**æœ€åæ›´æ–°**: 2026-01-24

---

## åç«¯ä¾èµ– (Python)

### æ ¸å¿ƒæ¡†æ¶

| ä¾èµ–              | å½“å‰ç‰ˆæœ¬ | å…¼å®¹èŒƒå›´  | å·²çŸ¥é—®é¢˜      | çŠ¶æ€ |
| ----------------- | -------- | --------- | ------------- | ---- |
| fastapi           | 0.109+   | >=0.104.0 | æ—             | âœ…   |
| uvicorn           | 0.27+    | >=0.24.0  | æ—             | âœ…   |
| pydantic          | 2.5+     | >=2.0.0   | V1 API ä¸å…¼å®¹ | âœ…   |
| pydantic-settings | 2.0+     | >=2.0.0   | æ—             | âœ…   |

### æ•°æ®åº“

| ä¾èµ–       | å½“å‰ç‰ˆæœ¬ | å…¼å®¹èŒƒå›´ | å·²çŸ¥é—®é¢˜       | çŠ¶æ€ |
| ---------- | -------- | -------- | -------------- | ---- |
| sqlalchemy | 2.0+     | >=2.0.0  | 1.x API ä¸å…¼å®¹ | âœ…   |
| asyncpg    | 0.31+    | >=0.29.0 | æ—              | âœ…   |
| aiosqlite  | 0.22+    | >=0.19.0 | ä»…ç”¨äºæµ‹è¯•     | âœ…   |
| alembic    | 1.13+    | >=1.12.0 | æ—              | âœ…   |

### è®¤è¯å®‰å…¨

| ä¾èµ–        | å½“å‰ç‰ˆæœ¬ | å…¼å®¹èŒƒå›´ | å·²çŸ¥é—®é¢˜              | çŠ¶æ€ |
| ----------- | -------- | -------- | --------------------- | ---- |
| bcrypt      | 5.0.0    | >=4.0.0  | âš ï¸ passlib ä¸å…¼å®¹     | ğŸ”´   |
| passlib     | 1.7.4    | >=1.7.4  | âš ï¸ bcrypt 4.1+ ä¸å…¼å®¹ | ğŸ”´   |
| python-jose | 3.3+     | >=3.3.0  | æ—                     | âœ…   |

### HTTP å®¢æˆ·ç«¯

| ä¾èµ–  | å½“å‰ç‰ˆæœ¬ | å…¼å®¹èŒƒå›´ | å·²çŸ¥é—®é¢˜                              | çŠ¶æ€ |
| ----- | -------- | -------- | ------------------------------------- | ---- |
| httpx | 0.26+    | >=0.25.0 | `app=` å‚æ•°å·²ç§»é™¤ï¼Œä½¿ç”¨ ASGITransport | âš ï¸   |

### AI/ML

| ä¾èµ–                | å½“å‰ç‰ˆæœ¬ | å…¼å®¹èŒƒå›´ | å·²çŸ¥é—®é¢˜         | çŠ¶æ€ |
| ------------------- | -------- | -------- | ---------------- | ---- |
| openai              | 1.0+     | >=1.0.0  | 0.x API å®Œå…¨ä¸åŒ | âœ…   |
| google-generativeai | 0.3+     | >=0.3.0  | æ—                | âœ…   |

---

## å·²çŸ¥å…¼å®¹æ€§é—®é¢˜è¯¦æƒ…

### ğŸ”´ passlib + bcrypt 5.0.0

**é—®é¢˜æè¿°**:

- bcrypt 4.1.0+ æ›´æ”¹äº†å†…éƒ¨ API
- passlib å°šæœªæ›´æ–°ä»¥æ”¯æŒæ–° API
- å¯¼è‡´ `ValueError: password cannot be longer than 72 bytes`

**é”™è¯¯ä¿¡æ¯**:

```
ValueError: password cannot be longer than 72 bytes, truncate manually if necessary
```

**è§£å†³æ–¹æ¡ˆ**:

æ–¹æ¡ˆ A - é™çº§ bcrypt:

```toml
dependencies = [
    "bcrypt>=4.0.0,<4.1.0",
]
```

æ–¹æ¡ˆ B - ç›´æ¥ä½¿ç”¨ bcryptï¼ˆæ¨èï¼‰:

```python
import bcrypt

def get_password_hash(password: str) -> str:
    return bcrypt.hashpw(
        password.encode('utf-8'),
        bcrypt.gensalt()
    ).decode('utf-8')

def verify_password(plain: str, hashed: str) -> bool:
    return bcrypt.checkpw(
        plain.encode('utf-8'),
        hashed.encode('utf-8')
    )
```

**çŠ¶æ€**: å¾…ä¿®å¤

---

### âš ï¸ httpx AsyncClient app å‚æ•°

**é—®é¢˜æè¿°**:

- httpx 0.25.0+ ç§»é™¤äº† `AsyncClient(app=...)` å‚æ•°
- éœ€è¦ä½¿ç”¨ `ASGITransport`

**é”™è¯¯ä¿¡æ¯**:

```
TypeError: AsyncClient.__init__() got an unexpected keyword argument 'app'
```

**è§£å†³æ–¹æ¡ˆ**:

```python
from httpx import AsyncClient, ASGITransport

transport = ASGITransport(app=app)
async with AsyncClient(transport=transport, base_url="http://test") as client:
    ...
```

**çŠ¶æ€**: âœ… å·²ä¿®å¤ï¼ˆconftest.pyï¼‰

---

## Python ç‰ˆæœ¬å…¼å®¹æ€§

| Python ç‰ˆæœ¬ | æ”¯æŒçŠ¶æ€  | å¤‡æ³¨         |
| ----------- | --------- | ------------ |
| 3.9         | âœ… æ”¯æŒ   | æœ€ä½ç‰ˆæœ¬     |
| 3.10        | âœ… æ”¯æŒ   | æ¨è         |
| 3.11        | âœ… æ”¯æŒ   | æ¨è         |
| 3.12        | âœ… æ”¯æŒ   | å½“å‰å¼€å‘ç‰ˆæœ¬ |
| 3.13        | â³ å¾…æµ‹è¯• | æœªéªŒè¯       |

---

## æ›´æ–°æ—¥å¿—

### 2026-01-24

- åˆå§‹åˆ›å»ºä¾èµ–çŸ©é˜µ
- è®°å½• passlib/bcrypt å…¼å®¹æ€§é—®é¢˜
- è®°å½• httpx ASGITransport é—®é¢˜

---

## ç»´æŠ¤æŒ‡å—

1. **æ·»åŠ æ–°ä¾èµ–æ—¶**:
   - æ›´æ–°æ­¤æ–‡æ¡£
   - æ·»åŠ ç‰ˆæœ¬çº¦æŸ
   - è®°å½•å·²çŸ¥é—®é¢˜

2. **é‡åˆ°å…¼å®¹æ€§é—®é¢˜æ—¶**:
   - åœ¨æ­¤æ–‡æ¡£è®°å½•
   - æä¾›è§£å†³æ–¹æ¡ˆ
   - æ›´æ–°çŠ¶æ€

3. **å®šæœŸç»´æŠ¤**:
   - æ¯æœˆæ£€æŸ¥ä¾èµ–æ›´æ–°
   - è¿è¡Œ `uv pip list --outdated`
   - æ›´æ–°å…¼å®¹æ€§çŸ©é˜µ
