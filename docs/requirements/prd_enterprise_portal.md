# PRD: 企业门户功能 (Enterprise Portal)

**版本**: v1.1  
**日期**: 2026-01-25  
**状态**: 已批准 (Approved)

---

## 1. 业务目标与愿景

### 核心痛点

江原道企业需要一个统一平台来提交季度/年度绩效数据、申请政府支持项目、查看公告信息。当前缺乏集中化的数据收集和管理工具。

### 成功指标

- **数据提交率**: 注册企业提交率 > 70%
- **审批周期**: 平均审批时间 < 3个工作日
- **用户满意度**: NPS > 40

---

## 2. 用户故事

### US-EP-001: 首页仪表盘

> **作为** 企业用户,  
> **我想要** 在首页看到最新公告和重要通知,  
> **以便** 快速了解平台动态和政策更新。

### US-EP-002: 绩效数据录入

> **作为** 企业财务人员,  
> **我想要** 按季度录入销售、雇佣和知识产权数据,  
> **以便** 完成政府要求的定期报告。

### US-EP-003: 绩效数据查询

> **作为** 企业管理者,  
> **我想要** 查看历史提交的绩效数据和审批状态,  
> **以便** 跟踪提交进度和处理反馈。

### US-EP-004: 项目申请

> **作为** 企业代表,  
> **我想要** 在线申请政府支持项目,  
> **以便** 获得资金或政策扶持。

### US-EP-005: 企业资料管理

> **作为** 企业管理员,  
> **我想要** 更新企业基本信息和联系人,  
> **以便** 保持资料最新。

### US-EP-006: 公告详情页面导航 (v1.1)

> **作为** 企业用户,  
> **我想要** 点击公告项目时跳转到独立的详情页面,  
> **以便** 更专注地阅读内容并方便分享链接。

### US-EP-007: 公告列表路由优化 (v1.1)

> **作为** 企业用户,  
> **我想要** 通过"查看全部"按钮进入各类公告的完整列表页面,  
> **以便** 快速找到所需信息。

---

## 3. 功能详情

### 3.1 首页仪表盘

**组件构成**:

- 最新5条公告列表 (标题 + 日期)
- 最新1条新闻 (图片卡片)
- 滚动Banner (右侧)
- 主Banner轮播 (全宽)
- 未读消息徽章 🔄 **待实现**

**数据来源**:

- `/api/v1/notices/latest5`
- `/api/v1/press/latest1`
- `/api/v1/banners?type=MAIN`

### 3.2 绩效数据管理

#### 3.2.1 数据录入

**数据分类**:

| 分类         | 字段                         | 说明 |
| ------------ | ---------------------------- | ---- |
| 销售与雇佣   | 季度销售额、员工数量         | 必填 |
| 政府支持履历 | 项目名称、支持金额、支持日期 | 选填 |
| 知识产权     | 专利数量、商标数量           | 选填 |

**工作流**:

1. 选择年份和季度
2. 填写各分类数据
3. 保存草稿 (仅企业可见)
4. 提交审批 (管理员可见)

**状态流转**:

```
draft → submitted → need_fix/approved
         ↓              ↑
      need_fix ─────────┘
```

#### 3.2.2 数据查询

**筛选条件**:

- 年份 (下拉)
- 季度 (Q1-Q4)
- 状态 (全部/草稿/已提交/待修改/已批准)

**显示字段**:

- 文档类型
- 文件名
- 提交日期
- 状态
- 管理员备注 (如有)

### 3.3 项目管理

#### 项目列表

**功能**:

- 搜索项目名称
- 分页 (10/20/30/50)
- 显示: 标题、登记日期、状态

#### 项目申请

**申请表单**:

- 企业信息 (自动填充)
- 联系人详情
- 附件上传 (最多5个文件)

### 3.4 UI/UX 体验

**视觉风格**: 遵循 `dev-frontend_patterns`

- 8点栅格系统
- 最大内容宽度 1200-1280px
- 深蓝色导航栏

**响应式设计** ✅ 已完成:

- 移动端 (≥360px): 单列布局
- 平板 (≥768px): 双列布局
- 桌面 (≥1280px): 完整多列布局

**微互动**:

- 表格行 Hover 效果
- 状态变更 Toast 通知
- 文件上传进度条

### 3.5 国际化 (i18n)

- **韩语/中文** 双语支持
- 日期格式本地化
- 数字格式本地化 (千分位)

### 3.6 公告导航优化 (v1.1) 🔄 **待实现**

#### 3.6.1 详情页面跳转

**变更内容**: 将公告详情从弹框（Modal）改为独立详情页面

| 公告类型     | 原设计   | 新设计                               |
| ------------ | -------- | ------------------------------------ |
| 支援事业公告 | 弹框显示 | 跳转至 `/member/programs/:id`        |
| 公告事项     | 弹框显示 | 跳转至 `/member/support/notices/:id` |

**优点**:

- 支持 URL 直接分享
- 更好的浏览器历史记录管理
- 提升移动端阅读体验

#### 3.6.2 "查看全部"路由优化

**变更内容**: 调整首页卡片"查看全部"按钮的目标路由

| 首页组件     | 原路由            | 新路由                    | 说明                       |
| ------------ | ----------------- | ------------------------- | -------------------------- |
| 支援事业公告 | `/member/project` | `/member/programs`        | 跳转至项目申请的列表页     |
| 公告事项     | `/member/notices` | `/member/support/notices` | 新增子菜单，归属一站式支持 |

**注意**: `/member/project` 原页面 (ProjectList.jsx in home module) 可以删除

#### 3.6.3 一站式支持子菜单新增

**菜单结构变更**:

```
一站式支持
├── 公告事项 (新增) → /member/support/notices
├── FAQ → /member/support/faq
├── 问询 → /member/support/inquiry
└── 问询记录 → /member/support/inquiry-history
```

---

## 4. 验收标准

### 首页功能

- [x] 首页加载显示最新5条公告
- [x] 新闻卡片正确显示图片和标题
- [x] Banner轮播自动切换
- [ ] 未读消息徽章显示正确数量 🔄

### 绩效数据录入

- [x] 可选择年份和季度
- [x] 三个数据分类Tab正常切换
- [x] 保存草稿功能正常
- [x] 提交后状态变为"已提交"
- [x] 草稿状态管理员不可见

### 绩效数据查询

- [x] 筛选条件正确过滤数据
- [x] 分页功能正常
- [x] 状态Badge正确显示
- [x] 管理员备注在"待修改"状态显示

### 项目功能

- [x] 项目列表搜索功能正常
- [x] 申请表单自动填充企业信息
- [x] 附件上传限制5个文件
- [x] 申请提交后显示确认

### 性能要求

- [x] 首页加载时间 < 3s
- [x] 数据列表加载时间 < 2s
- [x] 文件上传10MB内 < 5s

### 响应式验证

- [x] 360px宽度下布局正确
- [x] 768px宽度下布局正确
- [x] 1280px宽度下布局正确

### 公告导航优化 (v1.1)

- [ ] 支援事业公告点击后跳转至详情页面（非弹框）
- [ ] 公告事项点击后跳转至详情页面（非弹框）
- [ ] 详情页面支持通过 URL 直接访问
- [ ] 详情页面显示返回按钮
- [ ] 支援事业公告"查看全部"跳转至 `/member/programs`
- [ ] 公告事项"查看全部"跳转至 `/member/support/notices`
- [ ] 一站式支持菜单新增"公告事项"子菜单
- [ ] 删除原 `/member/project` 路由及相关组件

---

## 5. 技术注解

### API 端点

| 方法 | 端点                              | 描述             |
| ---- | --------------------------------- | ---------------- |
| GET  | `/api/v1/members/me`              | 获取当前企业信息 |
| PUT  | `/api/v1/members/me`              | 更新企业信息     |
| GET  | `/api/v1/performance`             | 查询绩效数据     |
| POST | `/api/v1/performance`             | 创建绩效记录     |
| PUT  | `/api/v1/performance/{id}`        | 更新绩效记录     |
| POST | `/api/v1/performance/{id}/submit` | 提交审批         |
| GET  | `/api/v1/projects`                | 获取项目列表     |
| POST | `/api/v1/projects/{id}/apply`     | 申请项目         |

### 依赖 Skill

- `dev-tdd_workflow` - 测试驱动开发
- `dev-frontend_patterns` - 前端规范
- `dev-terminology` - 术语一致性

### 数据库表

- `performance_records` - 绩效记录
- `performance_reviews` - 审批记录
- `projects` - 项目公告
- `project_applications` - 项目申请

### 路由配置变更 (v1.1)

**新增路由**:

| 路由                          | 组件                   | 描述           |
| ----------------------------- | ---------------------- | -------------- |
| `/member/programs/:id`        | `ProjectDetail.jsx`    | 事业公告详情页 |
| `/member/support/notices`     | `NoticesListPage.jsx`  | 公告事项列表页 |
| `/member/support/notices/:id` | `NoticeDetailPage.jsx` | 公告事项详情页 |

**删除路由**:

| 路由              | 对应文件                              | 说明                      |
| ----------------- | ------------------------------------- | ------------------------- |
| `/member/project` | `member/modules/home/ProjectList.jsx` | 已合并至 /member/programs |

**常量更新** (`constants.js`):

```javascript
// 更新 ROUTES
MEMBER_SUPPORT_NOTICES: '/member/support/notices',
// 删除
// MEMBER_PROJECT: '/member/project',  // 已废弃
```

---

_Generated by dev-prd skill_
